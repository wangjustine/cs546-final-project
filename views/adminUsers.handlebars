<h1>Welcome, Admin {{user.firstName}}!</h1>
<h2>All Users</h2>

<ul>
  {{#each users}}
    <li>
      <strong>{{this.firstName}} {{this.lastName}}</strong> - {{this.category}}
      <form method="POST" action="/admin/users/{{this._id}}/role" style="display: inline;">
        <select name="category" onchange="this.form.submit()">
          <option value="viewer" {{#if (eq this.category "viewer")}}selected{{/if}}>Viewer</option>
          <option value="editor" {{#if (eq this.category "editor")}}selected{{/if}}>Editor</option>
          <option value="admin" {{#if (eq this.category "admin")}}selected{{/if}}>Admin</option>
        </select>
      </form>
      <form method="POST" action="/admin/users/{{this._id}}/remove" style="display: inline;">
        <button type="submit" onclick="return confirm('Are you sure you want to remove this user?')">Remove</button>
      </form>
      <form method="POST" action="/admin/users/{{this._id}}/add-to-board" style="display: inline;">
        <select name="boardId" required>
          {{#each boards}}
            <option value="{{this.boardId}}">{{this.title}}</option>
          {{/each}}
        </select>
        <select name="role" required>
          <option value="viewer">Viewer</option>
          <option value="editor">Editor</option>
          <option value="admin">Admin</option>
        </select>
        <button type="submit">Add to Board</button>
      </form>
    </li>
  {{/each}}
</ul>

<a href="/admin">Back to Admin Dashboard</a>

<script src="/js/adminUsers.js"></script>

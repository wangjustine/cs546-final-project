<h1>Welcome, Admin {{user.firstName}}!</h1>
<h2>All Users</h2>

<ul id="user-list">
  {{#each users}}
    <li data-user-id="{{this._id}}" class="user-item">
      <strong>{{this.firstName}} {{this.lastName}}</strong> - <span class="user-category">{{this.category}}</span>
      <div class="user-actions">
        <form class="role-form" data-user-id="{{this._id}}">
          <input type="hidden" name="_csrf" value="{{csrfToken}}">
          <select name="category">
            <option value="viewer" {{#if (eq this.category "viewer")}}selected{{/if}}>Viewer</option>
            <option value="editor" {{#if (eq this.category "editor")}}selected{{/if}}>Editor</option>
            <option value="admin" {{#if (eq this.category "admin")}}selected{{/if}}>Admin</option>
          </select>
          <button type="submit" class="role-submit-btn">Update Role</button>
        </form>
        <form class="remove-form" data-user-id="{{this._id}}">
          <input type="hidden" name="_csrf" value="{{csrfToken}}">
          <button type="submit" class="remove-btn" onclick="return confirm('Are you sure you want to remove this user?')">Remove</button>
        </form>
      </div>
    </li>
  {{/each}}
</ul>

<a href="/admin">Back to Admin Dashboard</a>

<script src="/js/adminUsers.js"></script>